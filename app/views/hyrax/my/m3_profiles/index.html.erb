<% provide :page_title, t("hyrax.admin.sidebar.m3_profiles") %>

<% provide :head do %>
  <%= rss_feed_link_tag route_set: hyrax %>
  <%= atom_feed_link_tag route_set: hyrax %>
<% end %>

<% provide :page_header do %>
  <h1><span class="fa fa-table" aria-hidden="true"></span> M3 Profiles</h1>
  <div class="pull-right">
    <%#= link_to hyrax.my_import_m3_profiles_path, class: 'btn btn-primary' do %>
    <button type="button" class="fa fa-upload btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
      <%= t(:'helpers.action.m3_profile.import_profile') %>
    </button>
    <% if @m3_profiles.empty? %>
      <%= link_to hyrax.new_my_m3_profile_path, class: 'btn btn-primary' do %>
        <span aria-hidden="true"></span> <%= t(:'helpers.action.m3_profile.create') %>
      <% end %>
    <% end %>
  </div>
<% end %>

<div class="panel panel-default">
  <div class="panel-body">
    <% if @m3_profiles.present? %>
      <div class="table-responsive">
        <table class="table table-striped datatable">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Version</th>
              <th scope="col">Schema</th>
              <th scope="col">Created At</th>
              <th scope="col">Updated At</th>
            </tr>
          </thead>
          <tbody>
            <% @m3_profiles.each do |m3_profile| %>
              <tr>
                <td><%= link_to m3_profile.name, hyrax.my_m3_profile_path(m3_profile) %></td>
                <td><%= m3_profile.profile_version.to_f %></td>
                <td><%= m3_profile.profile %></td>
                <td><%= m3_profile.created_at.strftime("%b %d, %Y") %></td>
                <td><%= m3_profile.updated_at.strftime("%b %d, %Y") if m3_profile.updated_at %></td>
                <td><%= link_to raw('<span class="glyphicon glyphicon-pencil"></span>'), hyrax.edit_my_m3_profile_path(m3_profile) %></td>
                <td><%= link_to raw('<span class="glyphicon glyphicon-remove"></span>'), hyrax.my_m3_profile_path(m3_profile), method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <% else %>
        <p>No M3 Profiles have been created.</p>
      <% end %>
  </div>
</div>
